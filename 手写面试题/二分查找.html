<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二分查找</title>
</head>

<body>
    <script type="text/javascript">
        // 二分查找的特点
        // 1.有序数组
        // 2.每次都从中间开始, 元素和自身对比，大于或小于就从另外一半元素中查找

        // 大数据量下，查找较大的值比较高效，比如大数据量查2的，还不如循环高效

        // 查找第一个和target相等的数并返回下标
        function BinarySearch(arr, target) {
            if (!arr.length) return -1
            let lowIndex = 0, highIndex = arr.length - 1
            while (lowIndex <= highIndex) {
                const middleIndex = Math.floor((lowIndex + highIndex) / 2)
                const middleValue = arr[middleIndex]
                if (target < middleValue) {
                    // 目标小于中间的数值，从左边后一位开始开始
                    highIndex = middleIndex - 1
                } else if (target > middleValue) {
                    // 目标大于中间的数值
                    lowIndex = middleIndex + 1
                } else {
                    // 相等
                    // 有序的数组，而且找第一个，因此只考虑左边的和中间值相等的情况
                    // if (middleIndex === 0) return middleIndex
                    // if (arr[middleIndex - 1] === target) {
                    //     highIndex = middleIndex - 1
                    // } else {
                    //     return middleIndex
                    // }
                    // 有序数组，左边要么小于，要么等于（以升序为例）
                    if (middleIndex === 0 || arr[middleIndex - 1] < target) return middleIndex
                    highIndex = middleIndex - 1
                }
            }
            return -1
        }

        var arr = [1, 2, 3, 4, 5, 6, 6, 7, 8, 9, 10, 11, 12, 13]
        console.log(BinarySearch(arr, 6))
    </script>
</body>

</html>